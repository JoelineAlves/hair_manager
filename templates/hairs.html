{% extends "base.html" %}
{% block content %}

<!-- Headings -->
<div class="row center">
    <h3 class="center-align teal-text text-darken-4">For hairstyle lovers</h3>
    <h5>Join us to find out more about Hairstyle</h5>
</div>

<!-- Search Session -->
<div class="row card-panel grey lighten-5">
    <form action="{{ url_for('search') }}" method="post" class="col s12">
        <div class="row valign-wrapper center-align">
            <div class="input-field col s12 m8">
                <i class="fas fa-search prefix green-text text-darken-4"></i>
                <input type="text" name="query" id="query" minlength="3" class="validate" required>
                <label for="query">Search Hairstyle</label>
            </div>
            <div class="col s12 m4">
                <a href="{{ url_for('get_hairs') }}" class="red accent-3 btn text-shadow">Reset <i class="fas fa-refresh"></i></a>
                <button type="submit" class="green darken-4 btn text-shadow">
                    <i class="fas fa-search right"></i>Search
                </button>
            </div>
        </div>
    </form>
</div>

<!-- List -->
{% if hairs|length > 0 %}
<ul class="collection">
    {% for hair in hairs %}
    <li class="collection-item avatar">
        <img src="{{ hair.image_url }}" alt="{{ hair.hair_name }}" class="circle">
        <span class="title"><strong>{{ hair.hair_name }}</strong></span>
        <p><strong>Common Name:</strong> {{ hair.common_name }}</p>
        <p>{{ hair.description }}</p>
        <p class="teal-text text-darken-4"><strong>Category:</strong> {{ hair.category_name }}</p>
        <p>Added by: {{ hair.created_by }}, {{ hair.date }}</p>
        
        <!-- Reveal button -->
        <a href="#!" class="secondary-content" onclick="toggleDetails('{{ hair._id }}')">
            <i class="fas fa-magnifying-glass-plus"></i>
        </a>

        <!-- Revealed content -->
        <div id="details-{{ hair._id }}" class="reveal-content" style="display:none;">
            <p><strong>Hair Care:</strong> {{ hair.hair_care }}</p>
            <p>For some great advice on hair care, why not have a look at these videos we have made for you?</p>
            <a href="https://www.youtube.com/results?search_query=houseplants" class="btn-large red accent-3" target="_blank" rel="noopener" aria-label="YouTube link">
                <i class="fab fa-youtube"></i>
            </a>
        </div>

        <!-- Edit and Delete buttons -->
        {% if hair.created_by|lower == session.user|lower %}
        <div class="right">
            <a href="{{ url_for('edit_hairstyle', hair_id=hair._id) }}" class="btn-small teal darken-4">Edit <i class="fas fa-edit"></i></a>
            <a href="{{ url_for('delete_hairstyle', hair_id=hair._id) }}" onclick="confirmDeletion('{{ hair._id }}')" class="btn-small red accent-3">Delete <i class="fa fa-trash"></i></a>
        </div>
        {% endif %}
    </li>
    {% endfor %}
</ul>
{% else %}
<h4 class="red-text text-red accent-3 center-align">No results found!</h4>
{% endif %}

<!-- footer -->
<footer>
    <div class="footer-copyright center">
        <div class="container">
            <p class="black-text">Copyright &copy; Hairstyle <span id="year"></span></p>
        </div>
    </div>
</footer>
<!-- End of footer -->

{% endblock %}

{% block scripts %}
<script>
    $("#year").text(new Date().getFullYear());

    function confirmDeletion(hairId) {
        if (confirm("Are you sure you want to delete this hairstyle?")) {
            window.location.href = "/delete_hairstyle/" + hairId;
        }
    }

    function toggleDetails(id) {
        var details = document.getElementById('details-' + id);
        if (details.style.display === 'none') {
            details.style.display = 'block';
        } else {
            details.style.display = 'none';
        }
    }
</script>
{% endblock %}




